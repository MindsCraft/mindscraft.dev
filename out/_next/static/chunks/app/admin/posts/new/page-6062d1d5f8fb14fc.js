(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5503],{35695:(e,t,s)=>{"use strict";var r=s(18999);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},36034:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(95155),l=s(12115),a=s(35695),n=s(6874),o=s.n(n);function i(){return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})}let d=()=>{let[e,t]=(0,l.useState)({title:"",slug:"",content:"",excerpt:"",published:!1}),[s,n]=(0,l.useState)(!1),i=(0,a.useRouter)(),d=()=>{let s=e.title.toLowerCase().replace(/[^\w\s]/gi,"").replace(/\s+/g,"-");t(e=>({...e,slug:s}))},c=e=>{let{name:s,value:r,type:l}=e.target;if("checkbox"===l){let r=e.target.checked;t(e=>({...e,[s]:r}))}else t(e=>({...e,[s]:r}))},u=async t=>{t.preventDefault(),n(!0);try{if(!(await fetch("/api/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to create post");i.push("/admin/posts"),i.refresh()}catch(e){console.error("Error creating post:",e),alert("Failed to create post. Please try again.")}finally{n(!1)}};return(0,r.jsxs)("form",{onSubmit:u,className:"space-y-6 max-w-3xl",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,r.jsx)("input",{type:"text",name:"title",id:"title",required:!0,value:e.title,onChange:c,onBlur:()=>!e.slug&&d(),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700",children:"Slug"}),(0,r.jsxs)("div",{className:"mt-1 flex rounded-md shadow-sm",children:[(0,r.jsx)("input",{type:"text",name:"slug",id:"slug",required:!0,value:e.slug,onChange:c,className:"block w-full flex-1 rounded-none rounded-l-md border-gray-300 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),(0,r.jsx)("button",{type:"button",onClick:d,className:"inline-flex items-center rounded-r-md border border-l-0 border-gray-300 bg-gray-50 px-3 text-sm text-gray-500 hover:bg-gray-100",children:"Generate"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"excerpt",className:"block text-sm font-medium text-gray-700",children:"Excerpt"}),(0,r.jsx)("textarea",{name:"excerpt",id:"excerpt",rows:2,value:e.excerpt,onChange:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"A short description of the post. If left empty, it will be generated from the content."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Content"}),(0,r.jsx)("textarea",{name:"content",id:"content",rows:10,required:!0,value:e.content,onChange:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{id:"published",name:"published",type:"checkbox",checked:e.published,onChange:c,className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("label",{htmlFor:"published",className:"ml-2 block text-sm text-gray-900",children:"Publish immediately"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)(o(),{href:"/admin/posts",className:"rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:s,className:"inline-flex justify-center rounded-md border border-transparent bg-blue-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:s?"Saving...":"Save"})]})]})};function c(){let[e,t]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{t(!0)},[]),e)?(0,r.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)(o(),{href:"/admin/posts",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-500",children:"Back to posts"}),(0,r.jsx)("h1",{className:"mt-2 text-2xl font-bold text-gray-900",children:"Create New Post"})]}),(0,r.jsx)(d,{})]}):(0,r.jsx)(i,{})}},62426:(e,t,s)=>{Promise.resolve().then(s.bind(s,36034))}},e=>{var t=t=>e(e.s=t);e.O(0,[6874,8441,1684,7358],()=>t(62426)),_N_E=e.O()}]);